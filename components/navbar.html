<!-- 导航栏 -->
<nav class="custom-nav">
    <div class="nav-container">
        <a href="index.html" class="nav-brand">武汉大学足球协会</a>
        
        <!-- 移动端汉堡菜单按钮 -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <span class="menu-icon"></span>
            <span class="menu-icon"></span>
            <span class="menu-icon"></span>
        </button>

        <div class="nav-links" id="navLinks">
            <a href="index.html" class="nav-link">首页</a>
            <a href="pages/about.html" class="nav-link">社团介绍</a>
            <a href="pages/events.html" class="nav-link">赛事开展</a>
            <a href="pages/departments.html" class="nav-link">部门介绍</a>
            <a href="pages/news.html" class="nav-link">新闻公告</a>
            <a href="pages/match-management.html" class="nav-link">赛事管理</a>
            <a href="pages/contact.html" class="nav-link">联系我们</a>
            <div class="nav-dropdown">
                <a href="#" class="nav-link dropdown-toggle">赛事查询</a>
                <div class="dropdown-menu">
                    <a href="pages/freshmen2024search.html" class="dropdown-item">2024新生杯</a>
                    <a href="pages/Super2024.html" class="dropdown-item">2024振兴杯男子超级组</a>
                    <a href="pages/League2024.html" class="dropdown-item">2024振兴杯男子甲级组</a>
                    <a href="pages/Women2024.html" class="dropdown-item">2024振兴杯女子组</a>
                    <a href="pages/match-results.html" class="dropdown-item">赛果更新</a>
                </div>
            </div>
            <div id="userInfo" style="display: none;">
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-toggle" id="userNameDisplay">用户</a>
                    <div class="dropdown-menu">
                        <a href="pages/profile.html" class="dropdown-item">个人中心</a>
                        <a href="#" class="dropdown-item" onclick="logout()">登出</a>
                    </div>
                </div>
            </div>
            <a href="pages/register.html" class="nav-link" id="loginRegisterLink">登录/注册</a>
        </div>
    </div>
</nav>

<!-- 移动端菜单覆盖层 -->
<div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

<script>
    // 移动端菜单控制
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const navLinks = document.getElementById('navLinks');
    const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
    
    mobileMenuBtn.addEventListener('click', function() {
        navLinks.classList.toggle('active');
        mobileMenuOverlay.classList.toggle('active');
        document.body.classList.toggle('menu-open');
    });
    
    mobileMenuOverlay.addEventListener('click', function() {
        navLinks.classList.remove('active');
        mobileMenuOverlay.classList.remove('active');
        document.body.classList.remove('menu-open');
    });
    
    // 下拉菜单控制
    const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
    dropdownToggles.forEach(toggle => {
        toggle.addEventListener('click', function(e) {
            e.preventDefault();
            const dropdownMenu = this.nextElementSibling;
            dropdownMenu.classList.toggle('active');
        });
    });
    
    // 点击其他地方关闭下拉菜单
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.nav-dropdown')) {
            const dropdownMenus = document.querySelectorAll('.dropdown-menu');
            dropdownMenus.forEach(menu => {
                menu.classList.remove('active');
            });
        }
    });
    
    // 检查用户登录状态
    function checkLoginStatus() {
        const userId = localStorage.getItem('userId');
        const userName = localStorage.getItem('userName');
        
        if (userId && userName) {
            // 用户已登录，显示用户信息和登出按钮
            document.getElementById('userInfo').style.display = 'block';
            document.getElementById('userNameDisplay').textContent = userName;
            document.getElementById('loginRegisterLink').style.display = 'none';
        } else {
            // 用户未登录，显示登录/注册链接
            document.getElementById('userInfo').style.display = 'none';
            document.getElementById('loginRegisterLink').style.display = 'block';
        }
    }
    
    // 登出功能
    function logout() {
        // 清除本地存储中的用户信息
        localStorage.removeItem('userId');
        localStorage.removeItem('userName');
        
        // 更新导航栏显示
        checkLoginStatus();
        
        // 跳转到首页
        window.location.href = 'index.html';
    }
    
    // 页面加载时检查登录状态
    window.onload = function() {
        checkLoginStatus();
    };
</script>